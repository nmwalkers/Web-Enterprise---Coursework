{"version":3,"file":"use-delayed.cjs.development.js","sources":["../src/index.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\n\nlet arraysEqual = (a: any[], b: any[]) => {\n  if (a === b) return true;\n  if (a == null || b == null) return false;\n  if (a.length !== b.length) return false;\n\n  for (var i = 0; i < a.length; ++i) {\n    if (a[i] !== b[i]) return false;\n  }\n\n  return true;\n};\n\nlet useDelayed = <T,>(value: T, delay: number, ignore?: any[]) => {\n  let [state, setState] = useState(() => value);\n  let [cachedIgnore, setCachedIgnore] = useState(() => ignore || []);\n\n  useEffect(() => {\n    if (!Array.isArray(ignore)) {\n      if (Array.isArray(cachedIgnore)) setCachedIgnore([]);\n      return;\n    }\n\n    if (!arraysEqual(ignore, cachedIgnore)) setCachedIgnore(ignore);\n  }, [ignore]);\n\n  useEffect(() => {\n    if (Array.isArray(cachedIgnore) && cachedIgnore.indexOf(value) != -1) {\n      setState(value);\n      return;\n    }\n\n    let to = setTimeout(() => {\n      setState(value);\n    }, delay);\n\n    return () => clearTimeout(to);\n  }, [value, delay, cachedIgnore]);\n\n  return state;\n};\n\nexport default useDelayed;\n"],"names":["arraysEqual","a","b","length","i","useDelayed","value","delay","ignore","useState","state","setState","cachedIgnore","setCachedIgnore","useEffect","Array","isArray","indexOf","to","setTimeout","clearTimeout"],"mappings":";;;;;;AAEA,IAAIA,WAAW,GAAG,SAAdA,WAAc,CAACC,CAAD,EAAWC,CAAX;AAChB,MAAID,CAAC,KAAKC,CAAV,EAAa,OAAO,IAAP;AACb,MAAID,CAAC,IAAI,IAAL,IAAaC,CAAC,IAAI,IAAtB,EAA4B,OAAO,KAAP;AAC5B,MAAID,CAAC,CAACE,MAAF,KAAaD,CAAC,CAACC,MAAnB,EAA2B,OAAO,KAAP;;AAE3B,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,CAAC,CAACE,MAAtB,EAA8B,EAAEC,CAAhC,EAAmC;AACjC,QAAIH,CAAC,CAACG,CAAD,CAAD,KAASF,CAAC,CAACE,CAAD,CAAd,EAAmB,OAAO,KAAP;AACpB;;AAED,SAAO,IAAP;AACD,CAVD;;AAYA,IAAIC,UAAU,GAAG,SAAbA,UAAa,CAAKC,KAAL,EAAeC,KAAf,EAA8BC,MAA9B;kBACSC,cAAQ,CAAC;AAAA,WAAMH,KAAN;AAAA,GAAD;MAA3BI;MAAOC;;mBAC0BF,cAAQ,CAAC;AAAA,WAAMD,MAAM,IAAI,EAAhB;AAAA,GAAD;MAAzCI;MAAcC;;AAEnBC,EAAAA,eAAS,CAAC;AACR,QAAI,CAACC,KAAK,CAACC,OAAN,CAAcR,MAAd,CAAL,EAA4B;AAC1B,UAAIO,KAAK,CAACC,OAAN,CAAcJ,YAAd,CAAJ,EAAiCC,eAAe,CAAC,EAAD,CAAf;AACjC;AACD;;AAED,QAAI,CAACb,WAAW,CAACQ,MAAD,EAASI,YAAT,CAAhB,EAAwCC,eAAe,CAACL,MAAD,CAAf;AACzC,GAPQ,EAON,CAACA,MAAD,CAPM,CAAT;AASAM,EAAAA,eAAS,CAAC;AACR,QAAIC,KAAK,CAACC,OAAN,CAAcJ,YAAd,KAA+BA,YAAY,CAACK,OAAb,CAAqBX,KAArB,KAA+B,CAAC,CAAnE,EAAsE;AACpEK,MAAAA,QAAQ,CAACL,KAAD,CAAR;AACA;AACD;;AAED,QAAIY,EAAE,GAAGC,UAAU,CAAC;AAClBR,MAAAA,QAAQ,CAACL,KAAD,CAAR;AACD,KAFkB,EAEhBC,KAFgB,CAAnB;AAIA,WAAO;AAAA,aAAMa,YAAY,CAACF,EAAD,CAAlB;AAAA,KAAP;AACD,GAXQ,EAWN,CAACZ,KAAD,EAAQC,KAAR,EAAeK,YAAf,CAXM,CAAT;AAaA,SAAOF,KAAP;AACD,CA3BD;;;;"}