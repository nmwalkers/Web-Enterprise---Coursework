{"version":3,"file":"use-delayed.cjs.production.min.js","sources":["../src/index.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\n\nlet arraysEqual = (a: any[], b: any[]) => {\n  if (a === b) return true;\n  if (a == null || b == null) return false;\n  if (a.length !== b.length) return false;\n\n  for (var i = 0; i < a.length; ++i) {\n    if (a[i] !== b[i]) return false;\n  }\n\n  return true;\n};\n\nlet useDelayed = <T,>(value: T, delay: number, ignore?: any[]) => {\n  let [state, setState] = useState(() => value);\n  let [cachedIgnore, setCachedIgnore] = useState(() => ignore || []);\n\n  useEffect(() => {\n    if (!Array.isArray(ignore)) {\n      if (Array.isArray(cachedIgnore)) setCachedIgnore([]);\n      return;\n    }\n\n    if (!arraysEqual(ignore, cachedIgnore)) setCachedIgnore(ignore);\n  }, [ignore]);\n\n  useEffect(() => {\n    if (Array.isArray(cachedIgnore) && cachedIgnore.indexOf(value) != -1) {\n      setState(value);\n      return;\n    }\n\n    let to = setTimeout(() => {\n      setState(value);\n    }, delay);\n\n    return () => clearTimeout(to);\n  }, [value, delay, cachedIgnore]);\n\n  return state;\n};\n\nexport default useDelayed;\n"],"names":["value","delay","ignore","useState","state","setState","cachedIgnore","setCachedIgnore","useEffect","Array","isArray","a","b","length","i","arraysEqual","indexOf","to","setTimeout","clearTimeout"],"mappings":"2GAciB,SAAKA,EAAUC,EAAeC,SACrBC,YAAS,kBAAMH,KAAlCI,OAAOC,SAC0BF,YAAS,kBAAMD,GAAU,MAA1DI,OAAcC,cAEnBC,aAAU,WACHC,MAAMC,QAAQR,GAjBL,SAACS,EAAUC,MACvBD,IAAMC,EAAG,OAAO,KACX,MAALD,GAAkB,MAALC,EAAW,OAAO,KAC/BD,EAAEE,SAAWD,EAAEC,OAAQ,OAAO,MAE7B,IAAIC,EAAI,EAAGA,EAAIH,EAAEE,SAAUC,KAC1BH,EAAEG,KAAOF,EAAEE,GAAI,OAAO,SAGrB,EAaAC,CAAYb,EAAQI,IAAeC,EAAgBL,GAJlDO,MAAMC,QAAQJ,IAAeC,EAAgB,MAKlD,CAACL,IAEJM,aAAU,eACJC,MAAMC,QAAQJ,KAAiD,GAAhCA,EAAaU,QAAQhB,QAKpDiB,EAAKC,YAAW,WAClBb,EAASL,KACRC,UAEI,kBAAMkB,aAAaF,IARxBZ,EAASL,KASV,CAACA,EAAOC,EAAOK,IAEXF"}