{"version":3,"file":"popover.cjs.production.min.js","sources":["../src/portal.tsx","../src/popover.tsx","../src/tooltip.tsx","../src/index.tsx"],"sourcesContent":["import { createPortal } from 'react-dom';\r\n\r\nexport let RenderToBody = ({ children }: { children: React.ReactElement }) => {\r\n  if (typeof window == 'undefined') return null;\r\n  return createPortal(children, document.body);\r\n};\r\n","import { styled, keyframes } from 'goober';\r\nimport React, { createRef, useCallback, useEffect, useState } from 'react';\r\nimport { usePopper } from 'react-popper';\r\nimport useDelayed from 'use-delayed';\r\nimport outsideClick from '@varld/outside-click';\r\nimport { RenderToBody } from './portal';\r\n\r\nlet Wrapper = styled('div', React.forwardRef)`\r\n  z-index: 9999;\r\n  pointer-events: none;\r\n\r\n  &.open {\r\n    pointer-events: all;\r\n  }\r\n`;\r\n\r\nlet Inner = styled('div')`\r\n  padding: 7px;\r\n  border-radius: 9px;\r\n  border: solid #efefef 1px;\r\n  background: white;\r\n  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.12);\r\n  opacity: 1;\r\n`;\r\n\r\nlet fadeIn = keyframes`\r\n  from {\r\n    opacity: 0;\r\n    margin-top: 0px;\r\n  }\r\n\r\n  to {\r\n    opacity: 1;\r\n    margin-top: 6px;\r\n  }\r\n`;\r\n\r\nlet fadeOut = keyframes`\r\n  from {\r\n    opacity: 1;\r\n    margin-top: 6px;\r\n  }\r\n\r\n  to {\r\n    opacity: 0;\r\n    margin-top: 0px;\r\n  }\r\n`;\r\n\r\nexport let Popover = React.forwardRef(\r\n  (\r\n    {\r\n      popover,\r\n      children,\r\n    }: {\r\n      popover: (d: {\r\n        visible: boolean;\r\n        open: boolean;\r\n        close: () => void;\r\n      }) => React.ReactElement;\r\n      children: React.ReactElement | React.ReactElement[];\r\n    },\r\n    ref: any\r\n  ) => {\r\n    let [referenceElement, setReferenceElement] = useState(null) as any;\r\n    let [popperElement, setPopperElement] = useState(null) as any;\r\n    let { styles, attributes } = usePopper(referenceElement, popperElement);\r\n    let [open, setOpen] = useState(false);\r\n    let visible = useDelayed(open, 500, [true]);\r\n    let close = useCallback(() => setOpen(false), [setOpen]);\r\n\r\n    let popoverEl = popover({ visible, open, close });\r\n\r\n    useEffect(() => {\r\n      return outsideClick(\r\n        [referenceElement, popperElement],\r\n        () => setOpen(false),\r\n        () => open\r\n      );\r\n    }, [referenceElement, popperElement, open]);\r\n\r\n    useEffect(() => {\r\n      if (!ref) ref = createRef();\r\n      ref.current = { setOpen };\r\n    }, [ref, setOpen]);\r\n\r\n    return (\r\n      <>\r\n        <div\r\n          tabIndex={0}\r\n          ref={setReferenceElement}\r\n          onClick={() => setOpen(!open)}\r\n          style={{\r\n            width: 'fit-content',\r\n            height: 'fit-content',\r\n          }}\r\n          data-popover-anchor\r\n        >\r\n          {children}\r\n        </div>\r\n\r\n        {visible && (\r\n          <RenderToBody>\r\n            <Wrapper\r\n              className={open ? 'open' : ''}\r\n              ref={setPopperElement}\r\n              style={styles.popper}\r\n              {...attributes.popper}\r\n            >\r\n              <Inner\r\n                style={{\r\n                  animation: `${\r\n                    open ? fadeIn : fadeOut\r\n                  } 0.2s ease-in-out forwards`,\r\n                }}\r\n              >\r\n                {popoverEl}\r\n              </Inner>\r\n            </Wrapper>\r\n          </RenderToBody>\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n);\r\n","import { keyframes, styled } from 'goober';\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport { usePopper } from 'react-popper';\r\nimport useDelayed from 'use-delayed';\r\nimport outsideClick from '@varld/outside-click';\r\n\r\nlet Wrapper = styled('div', React.forwardRef)`\r\n  width: fit-content;\r\n  z-index: 9999;\r\n  pointer-events: none;\r\n\r\n  &.open {\r\n    pointer-events: all;\r\n  }\r\n`;\r\n\r\nlet Inner = styled('div')`\r\n  border: solid #efefef 1px;\r\n  border-radius: 5px;\r\n  padding: 6px 10px;\r\n  background: white;\r\n  color: black;\r\n  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);\r\n  font-size: 0.8em;\r\n  font-weight: 500;\r\n`;\r\n\r\nlet fadeIn = keyframes`\r\n  from {\r\n    opacity: 0;\r\n    margin-top: 0px;\r\n  }\r\n\r\n  to {\r\n    opacity: 1;\r\n    margin-top: 5px;\r\n  }\r\n`;\r\n\r\nlet fadeOut = keyframes`\r\n  from {\r\n    opacity: 1;\r\n    margin-top: 5px;\r\n  }\r\n\r\n  to {\r\n    opacity: 0;\r\n    margin-top: 0px;\r\n  }\r\n`;\r\n\r\nexport let Tooltip = ({\r\n  content,\r\n  children,\r\n}: {\r\n  content: string;\r\n  children: React.ReactElement | React.ReactElement[];\r\n}) => {\r\n  let [referenceElement, setReferenceElement] = useState(null) as any;\r\n  let [popperElement, setPopperElement] = useState(null) as any;\r\n  let { styles, attributes } = usePopper(referenceElement, popperElement);\r\n  let [open, setOpen] = useState(false);\r\n  let visible = useDelayed(open, 500, [true]);\r\n  let enterToRef = useRef<any>();\r\n\r\n  useEffect(() => {\r\n    return outsideClick(\r\n      [referenceElement, popperElement],\r\n      () => setOpen(false),\r\n      () => open\r\n    );\r\n  }, [referenceElement, popperElement, open]);\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        tabIndex={0}\r\n        ref={setReferenceElement}\r\n        onClick={() => {\r\n          if (open) clearTimeout(enterToRef.current);\r\n          setOpen(true);\r\n        }}\r\n        onMouseEnter={() => {\r\n          clearTimeout(enterToRef.current);\r\n          enterToRef.current = setTimeout(() => {\r\n            setOpen(true);\r\n          }, 300);\r\n        }}\r\n        onMouseLeave={() => {\r\n          clearTimeout(enterToRef.current);\r\n          setOpen(false);\r\n        }}\r\n        style={{\r\n          width: 'fit-content',\r\n          height: 'fit-content',\r\n        }}\r\n      >\r\n        {children}\r\n      </div>\r\n\r\n      {visible && (\r\n        <Wrapper\r\n          className={open ? 'open' : ''}\r\n          ref={setPopperElement}\r\n          style={styles.popper}\r\n          {...attributes.popper}\r\n        >\r\n          <Inner\r\n            style={{\r\n              animation: `${open ? fadeIn : fadeOut} 0.2s ease-in-out forwards`,\r\n            }}\r\n          >\r\n            {content}\r\n          </Inner>\r\n        </Wrapper>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n","import { setup } from 'goober';\nimport * as React from 'react';\n\nsetup(React.createElement);\n\nexport * from './popover';\nexport * from './tooltip';\nexport * from './portal';\n"],"names":["RenderToBody","window","createPortal","children","document","body","Wrapper","styled","React","forwardRef","Inner","fadeIn","keyframes","fadeOut","Popover","ref","popover","useState","referenceElement","setReferenceElement","popperElement","setPopperElement","usePopper","styles","attributes","open","setOpen","visible","useDelayed","close","useCallback","popoverEl","useEffect","outsideClick","createRef","current","tabIndex","onClick","style","width","height","className","popper","animation","setup","content","enterToRef","useRef","clearTimeout","onMouseEnter","setTimeout","onMouseLeave"],"mappings":"qXAEWA,EAAe,kBACH,oBAAVC,OAA8B,KAClCC,iBAFoBC,SAEGC,SAASC,OCGrCC,EAAUC,SAAO,MAAOC,EAAMC,WAApBF,2GASVG,EAAQH,SAAO,MAAPA,8KASRI,EAASC,0IAYTC,EAAUD,0IAYHE,EAAUN,EAAMC,YACzB,WAYEM,OAVEC,IAAAA,QACAb,IAAAA,WAW4Cc,WAAS,MAAlDC,OAAkBC,SACiBF,WAAS,MAA5CG,OAAeC,SACSC,YAAUJ,EAAkBE,GAAnDG,IAAAA,OAAQC,IAAAA,aACQP,YAAS,GAA1BQ,OAAMC,OACPC,EAAUC,EAAWH,EAAM,IAAK,EAAC,IACjCI,EAAQC,eAAY,kBAAMJ,GAAQ,KAAQ,CAACA,IAE3CK,EAAYf,EAAQ,CAAEW,QAAAA,EAASF,KAAAA,EAAMI,MAAAA,WAEzCG,aAAU,kBACDC,EACL,CAACf,EAAkBE,IACnB,kBAAMM,GAAQ,MACd,kBAAMD,OAEP,CAACP,EAAkBE,EAAeK,IAErCO,aAAU,WACHjB,IAAKA,EAAMmB,eAChBnB,EAAIoB,QAAU,CAAET,QAAAA,KACf,CAACX,EAAKW,IAGPlB,gCACEA,uBACE4B,SAAU,EACVrB,IAAKI,EACLkB,QAAS,kBAAMX,GAASD,IACxBa,MAAO,CACLC,MAAO,cACPC,OAAQ,yCAITrC,GAGFwB,GACCnB,gBAACR,OACCQ,gBAACF,iBACCmC,UAAWhB,EAAO,OAAS,GAC3BV,IAAKM,EACLiB,MAAOf,EAAOmB,QACVlB,EAAWkB,QAEflC,gBAACE,GACC4B,MAAO,CACLK,WACElB,EAAOd,EAASE,kCAInBkB,SC9GbzB,EAAUC,SAAO,MAAOC,EAAMC,WAApBF,kIAUVG,EAAQH,SAAO,MAAPA,8NAWRI,EAASC,0IAYTC,EAAUD,0ICpCdgC,QAAMpC,0EDgDe,gBACnBqC,IAAAA,QACA1C,IAAAA,WAK8Cc,WAAS,MAAlDC,OAAkBC,SACiBF,WAAS,MAA5CG,OAAeC,SACSC,YAAUJ,EAAkBE,GAAnDG,IAAAA,OAAQC,IAAAA,aACQP,YAAS,GAA1BQ,OAAMC,OACPC,EAAUC,EAAWH,EAAM,IAAK,EAAC,IACjCqB,EAAaC,kBAEjBf,aAAU,kBACDC,EACL,CAACf,EAAkBE,IACnB,kBAAMM,GAAQ,MACd,kBAAMD,OAEP,CAACP,EAAkBE,EAAeK,IAGnCjB,gCACEA,uBACE4B,SAAU,EACVrB,IAAKI,EACLkB,QAAS,WACHZ,GAAMuB,aAAaF,EAAWX,SAClCT,GAAQ,IAEVuB,aAAc,WACZD,aAAaF,EAAWX,SACxBW,EAAWX,QAAUe,YAAW,WAC9BxB,GAAQ,KACP,MAELyB,aAAc,WACZH,aAAaF,EAAWX,SACxBT,GAAQ,IAEVY,MAAO,CACLC,MAAO,cACPC,OAAQ,gBAGTrC,GAGFwB,GACCnB,gBAACF,iBACCmC,UAAWhB,EAAO,OAAS,GAC3BV,IAAKM,EACLiB,MAAOf,EAAOmB,QACVlB,EAAWkB,QAEflC,gBAACE,GACC4B,MAAO,CACLK,WAAclB,EAAOd,EAASE,kCAG/BgC"}