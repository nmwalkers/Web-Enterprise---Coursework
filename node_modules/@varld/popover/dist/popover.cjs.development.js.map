{"version":3,"file":"popover.cjs.development.js","sources":["../src/portal.tsx","../src/popover.tsx","../src/tooltip.tsx","../src/index.tsx"],"sourcesContent":["import { createPortal } from 'react-dom';\r\n\r\nexport let RenderToBody = ({ children }: { children: React.ReactElement }) => {\r\n  if (typeof window == 'undefined') return null;\r\n  return createPortal(children, document.body);\r\n};\r\n","import { styled, keyframes } from 'goober';\r\nimport React, { createRef, useCallback, useEffect, useState } from 'react';\r\nimport { usePopper } from 'react-popper';\r\nimport useDelayed from 'use-delayed';\r\nimport outsideClick from '@varld/outside-click';\r\nimport { RenderToBody } from './portal';\r\n\r\nlet Wrapper = styled('div', React.forwardRef)`\r\n  z-index: 9999;\r\n  pointer-events: none;\r\n\r\n  &.open {\r\n    pointer-events: all;\r\n  }\r\n`;\r\n\r\nlet Inner = styled('div')`\r\n  padding: 7px;\r\n  border-radius: 9px;\r\n  border: solid #efefef 1px;\r\n  background: white;\r\n  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.12);\r\n  opacity: 1;\r\n`;\r\n\r\nlet fadeIn = keyframes`\r\n  from {\r\n    opacity: 0;\r\n    margin-top: 0px;\r\n  }\r\n\r\n  to {\r\n    opacity: 1;\r\n    margin-top: 6px;\r\n  }\r\n`;\r\n\r\nlet fadeOut = keyframes`\r\n  from {\r\n    opacity: 1;\r\n    margin-top: 6px;\r\n  }\r\n\r\n  to {\r\n    opacity: 0;\r\n    margin-top: 0px;\r\n  }\r\n`;\r\n\r\nexport let Popover = React.forwardRef(\r\n  (\r\n    {\r\n      popover,\r\n      children,\r\n    }: {\r\n      popover: (d: {\r\n        visible: boolean;\r\n        open: boolean;\r\n        close: () => void;\r\n      }) => React.ReactElement;\r\n      children: React.ReactElement | React.ReactElement[];\r\n    },\r\n    ref: any\r\n  ) => {\r\n    let [referenceElement, setReferenceElement] = useState(null) as any;\r\n    let [popperElement, setPopperElement] = useState(null) as any;\r\n    let { styles, attributes } = usePopper(referenceElement, popperElement);\r\n    let [open, setOpen] = useState(false);\r\n    let visible = useDelayed(open, 500, [true]);\r\n    let close = useCallback(() => setOpen(false), [setOpen]);\r\n\r\n    let popoverEl = popover({ visible, open, close });\r\n\r\n    useEffect(() => {\r\n      return outsideClick(\r\n        [referenceElement, popperElement],\r\n        () => setOpen(false),\r\n        () => open\r\n      );\r\n    }, [referenceElement, popperElement, open]);\r\n\r\n    useEffect(() => {\r\n      if (!ref) ref = createRef();\r\n      ref.current = { setOpen };\r\n    }, [ref, setOpen]);\r\n\r\n    return (\r\n      <>\r\n        <div\r\n          tabIndex={0}\r\n          ref={setReferenceElement}\r\n          onClick={() => setOpen(!open)}\r\n          style={{\r\n            width: 'fit-content',\r\n            height: 'fit-content',\r\n          }}\r\n          data-popover-anchor\r\n        >\r\n          {children}\r\n        </div>\r\n\r\n        {visible && (\r\n          <RenderToBody>\r\n            <Wrapper\r\n              className={open ? 'open' : ''}\r\n              ref={setPopperElement}\r\n              style={styles.popper}\r\n              {...attributes.popper}\r\n            >\r\n              <Inner\r\n                style={{\r\n                  animation: `${\r\n                    open ? fadeIn : fadeOut\r\n                  } 0.2s ease-in-out forwards`,\r\n                }}\r\n              >\r\n                {popoverEl}\r\n              </Inner>\r\n            </Wrapper>\r\n          </RenderToBody>\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n);\r\n","import { keyframes, styled } from 'goober';\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport { usePopper } from 'react-popper';\r\nimport useDelayed from 'use-delayed';\r\nimport outsideClick from '@varld/outside-click';\r\n\r\nlet Wrapper = styled('div', React.forwardRef)`\r\n  width: fit-content;\r\n  z-index: 9999;\r\n  pointer-events: none;\r\n\r\n  &.open {\r\n    pointer-events: all;\r\n  }\r\n`;\r\n\r\nlet Inner = styled('div')`\r\n  border: solid #efefef 1px;\r\n  border-radius: 5px;\r\n  padding: 6px 10px;\r\n  background: white;\r\n  color: black;\r\n  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);\r\n  font-size: 0.8em;\r\n  font-weight: 500;\r\n`;\r\n\r\nlet fadeIn = keyframes`\r\n  from {\r\n    opacity: 0;\r\n    margin-top: 0px;\r\n  }\r\n\r\n  to {\r\n    opacity: 1;\r\n    margin-top: 5px;\r\n  }\r\n`;\r\n\r\nlet fadeOut = keyframes`\r\n  from {\r\n    opacity: 1;\r\n    margin-top: 5px;\r\n  }\r\n\r\n  to {\r\n    opacity: 0;\r\n    margin-top: 0px;\r\n  }\r\n`;\r\n\r\nexport let Tooltip = ({\r\n  content,\r\n  children,\r\n}: {\r\n  content: string;\r\n  children: React.ReactElement | React.ReactElement[];\r\n}) => {\r\n  let [referenceElement, setReferenceElement] = useState(null) as any;\r\n  let [popperElement, setPopperElement] = useState(null) as any;\r\n  let { styles, attributes } = usePopper(referenceElement, popperElement);\r\n  let [open, setOpen] = useState(false);\r\n  let visible = useDelayed(open, 500, [true]);\r\n  let enterToRef = useRef<any>();\r\n\r\n  useEffect(() => {\r\n    return outsideClick(\r\n      [referenceElement, popperElement],\r\n      () => setOpen(false),\r\n      () => open\r\n    );\r\n  }, [referenceElement, popperElement, open]);\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        tabIndex={0}\r\n        ref={setReferenceElement}\r\n        onClick={() => {\r\n          if (open) clearTimeout(enterToRef.current);\r\n          setOpen(true);\r\n        }}\r\n        onMouseEnter={() => {\r\n          clearTimeout(enterToRef.current);\r\n          enterToRef.current = setTimeout(() => {\r\n            setOpen(true);\r\n          }, 300);\r\n        }}\r\n        onMouseLeave={() => {\r\n          clearTimeout(enterToRef.current);\r\n          setOpen(false);\r\n        }}\r\n        style={{\r\n          width: 'fit-content',\r\n          height: 'fit-content',\r\n        }}\r\n      >\r\n        {children}\r\n      </div>\r\n\r\n      {visible && (\r\n        <Wrapper\r\n          className={open ? 'open' : ''}\r\n          ref={setPopperElement}\r\n          style={styles.popper}\r\n          {...attributes.popper}\r\n        >\r\n          <Inner\r\n            style={{\r\n              animation: `${open ? fadeIn : fadeOut} 0.2s ease-in-out forwards`,\r\n            }}\r\n          >\r\n            {content}\r\n          </Inner>\r\n        </Wrapper>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n","import { setup } from 'goober';\nimport * as React from 'react';\n\nsetup(React.createElement);\n\nexport * from './popover';\nexport * from './tooltip';\nexport * from './portal';\n"],"names":["RenderToBody","children","window","createPortal","document","body","Wrapper","styled","React","forwardRef","Inner","fadeIn","keyframes","fadeOut","Popover","ref","popover","useState","referenceElement","setReferenceElement","popperElement","setPopperElement","usePopper","styles","attributes","open","setOpen","visible","useDelayed","close","useCallback","popoverEl","useEffect","outsideClick","createRef","current","tabIndex","onClick","style","width","height","className","popper","animation","Tooltip","content","enterToRef","useRef","clearTimeout","onMouseEnter","setTimeout","onMouseLeave","setup"],"mappings":"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"}